@prefix cpsv-ap: <http://data.europa.eu/m8g/> .
@prefix dct: <http://purl.org/dc/terms/> .
@prefix vcard: <http://www.w3.org/2006/vcard/ns#> .
@prefix org: <http://www.w3.org/ns/org#> .
@prefix dcat: <http://www.w3.org/ns/dcat#> .
@prefix foaf: <http://xmlns.com/foaf/0.1/> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix ex: <http://example.org/ns#> .
@prefix ronl: <https://regels.overheid.nl/termen/> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix prov: <http://www.w3.org/ns/prov#> .
@prefix skos: <http://www.w3.org/2004/02/skos/core#> .
@prefix cprmv: <https://cprmv.open-regels.nl/0.3.0/> .
@prefix time: <http://www.w3.org/2006/time#> .

#################################################################################
#                                                                               #
# ORGANIZATION                                                                  #
#                                                                               #
#################################################################################

<https://organisaties.overheid.nl/28212263/Sociale_Verzekeringsbank> a foaf:Organization ;
    foaf:name "Sociale Verzekeringsbank (SVB)"@nl ;
    foaf:name "Social insurance bank (SVB)"@en ;
    foaf:homepage <https://www.svb.nl/nl/> ;
    foaf:uri <https://identifier.overheid.nl/tooi/id/zbo/zb000143> .

#################################################################################
#                                                                               #
# PUBLIC SERVICE (Core CPSV-AP with CPRMV Extensions)                          #
#                                                                               #
#################################################################################

<aow_leeftijd_service> a cpsv-ap:PublicService ;
    dct:title "Bepaling leeftijd AOW"@nl ;
    dct:title "Determination of AOW age"@en ;
    dct:description "Bepaling van de leeftijd AOW (Algemene Ouderdomswet)."@nl ;
    dct:description "Determination of AOW age (General Old Age Act)."@en ;
    
    # CPSV-AP Core Properties
    dct:identifier <https://standaarden.overheid.nl/owms/terms/aow-leeftijd> ;
    dct:creator <https://organisaties.overheid.nl/28212263/Sociale_Verzekeringsbank> ;
    dct:publisher <https://organisaties.overheid.nl/28212263/Sociale_Verzekeringsbank> ;
    dct:subject "Sociale zekerheid"@nl ;
    dct:subject "Social security"@en ;
    dct:issued "2023-06-12"^^xsd:date ;
    dct:modified "2024-12-09"^^xsd:date ;
    dct:language "nld" ;
    
    # CPRMV Extensions - Law Implementation
    cprmv:implements "BWBR0002221" ;
    cprmv:implementsVersion "2025-01-01_0" ;
    cprmv:title "Algemene Ouderdomswet (AOW) - Leeftijdsberekening"@nl ;
    cprmv:title "General Old Age Pensions Act (AOW) - Age Calculation"@en ;
    cprmv:description "Bepaling van de AOW-leeftijd per jaar op basis van de Algemene Ouderdomswet, Artikel 7a"@nl ;
    cprmv:description "Determination of the AOW age per year based on the General Old Age Pensions Act, Article 7a"@en ;
    
    # RONL Custom Extensions
    ronl:analysis ronl:WetsanalyseJAS ;
    ronl:method ronl:ConcordiaLegal ;
    ronl:implements <aow_leeftijd_regels> ;
    
    # CPSV-AP Channel
    cpsv-ap:hasChannel [
        a cpsv-ap:Channel ;
        dct:title "Online portaal"@nl ;
        dct:title "Online portal"@en ;
        cpsv-ap:accessURL <https://regels.overheid.nl/lab/aow-leeftijd/> ;
        dct:description "Het online portaal waar iedereen zijn/haar AOW leeftijd kan berekenen."@nl ;
        dct:description "The online portal where everyone can calculate their AOW age."@en ;
        cpsv-ap:channelType [
            a skos:Concept ;
            skos:prefLabel "Web Portal"@en ;
            skos:exactMatch <http://example.org/channel-type/web-portal> ;
        ]
    ] ;
    
    # CPSV-AP Contact Point
    cpsv-ap:hasContactPoint [
        a vcard:Organization ;
        vcard:fn "SVB Customer Service"@en ;
        vcard:hasEmail <mailto:algoritmenenai@svb.nl> ;
        vcard:hasTelephone [
            a vcard:Work, vcard:Voice ;
            vcard:hasValue <tel:+31883451234> ;
        ] ;
        vcard:hasURL <https://www.svb.nl/nl/contact> ;
    ] ;
    
    # CPSV-AP Goal
    cpsv-ap:goal "Landelijk herbruikbare service voor gevalideerde bepaling van de leeftijd AOW."@nl ;
    cpsv-ap:goal "Nationally reusable service for validated determination of the AOW age."@en ;
    
    # CPSV-AP Legal Resource with CPRMV Extensions
    cpsv-ap:hasLegalResource [
        a cpsv-ap:LegalResource ;
        dct:title "Algemene Ouderdomswet (AOW)"@nl ;
        dct:title "General Old Age Pensions Act (AOW)"@en ;
        dcat:accessURL <https://wetten.overheid.nl/jci1.3:c:BWBR0002221> ;
        dcat:accessURL <https://wetten.overheid.nl/jci1.3:c:BWBR0002221&hoofdstuk=III&paragraaf=1&artikel=7&z=2023-01-01&g=2023-01-01> ;
        dcat:accessURL <https://wetten.overheid.nl/jci1.3:c:BWBR0002221&hoofdstuk=III&paragraaf=1&artikel=7a&z=2023-01-01&g=2023-01-01> ;
        
        # CPRMV Law Reference
        cprmv:implements "BWBR0002221" ;
        cprmv:implementsVersion "2025-01-01_0" ;
    ] ;
    
    # CPSV-AP Output
    cpsv-ap:hasOutput [
        a cpsv-ap:Output ;
        dct:title "AOW-leeftijd berekening resultaat"@nl ;
        dct:title "AOW age calculation result"@en ;
        dct:description "Vastgestelde AOW-leeftijd op peildatum."@nl ;
        dct:description "Established AOW age on reference date."@en ;
    ] ;
    
    # CPSV-AP Cost
    cpsv-ap:hasCost [
        a cpsv-ap:Cost ;
        dct:description "De dienst is gratis."@nl ;
        dct:description "The service is free of charge."@en ;
    ] .

#################################################################################
#                                                                               #
# BUSINESS RULES (CPSV-AP Rule + CPRMV Extensions + DMN Distribution)          #
#                                                                               #
#################################################################################

<aow_leeftijd_regels> a cpsv-ap:Rule ;
    dct:title "Bedrijfsregels voor bepaling van de AOW-leeftijd"@nl ;
    dct:title "Business Rules for AOW Age Determination"@en ;
    dct:description "Een op regels gebaseerd beslismodel voor het vaststellen van de AOW-leeftijd volgens de Algemene Ouderdomswet (AOW)."@nl ;
    dct:description "A rules-based decision model for determining the AOW age according to the General Old Age Pensions Act (AOW)."@en ;
    dct:version "1.0" ;
    
    # CPRMV Decision Model Metadata
    cprmv:implements "BWBR0002221" ;
    cprmv:implementsVersion "2025-01-01_0" ;
    cprmv:title "RONL AOW leeftijd beslissingstabel"@nl ;
    cprmv:title "RONL AOW age decision table"@en ;
    cprmv:description "Bepaling van de AOW-leeftijd per jaar op basis van de Algemene Ouderdomswet, Artikel 7a"@nl ;
    cprmv:description "Determination of the AOW age per year based on the General Old Age Pensions Act, Article 7a"@en ;
    
    # CPRMV Ruleset Classification
    cprmv:rulesetType "temporal-mapping" ;
    cprmv:ruleMethod "decision-table" ;
    
    # PRIMARY DISTRIBUTION: TriplyDB Assets
    dcat:distribution [
        a dcat:Distribution ;
        dct:title "DMN Beslissingsmodel (TriplyDB Assets)"@nl ;
        dct:title "DMN Decision Model (TriplyDB Assets)"@en ;
        dct:description "Primaire distributie via TriplyDB ge√Øntegreerd met semantische metadata"@nl ;
        dct:description "Primary distribution via TriplyDB integrated with semantic metadata"@en ;
        dct:format <http://publications.europa.eu/resource/authority/file-type/DMN> ;
        dcat:mediaType "application/xml" ;
        # CORRECTED URLs with actual asset ID
        dcat:accessURL <https://open-regels.triply.cc/stevengort/aow-leeftijd-service/assets/68e4d2323ecc85ee67ec05ed> ;
        dcat:downloadURL <https://open-regels.triply.cc/stevengort/aow-leeftijd-service/assets/68e4d2323ecc85ee67ec05ed> ;
        dcat:byteSize "15234"^^xsd:nonNegativeInteger ;
        dct:issued "2024-12-09"^^xsd:date ;
        dct:license <http://creativecommons.org/licenses/by/4.0/> ;
    ] ;
    
    # SECONDARY DISTRIBUTION: GitLab CE Repository
    dcat:distribution [
        a dcat:Distribution ;
        dct:title "DMN Beslissingsmodel (GitLab Repository)"@nl ;
        dct:title "DMN Decision Model (GitLab Repository)"@en ;
        dct:description "Versiebeheerde bron met wijzigingsgeschiedenis en diffs"@nl ;
        dct:description "Version-controlled source with change history and diffs"@en ;
        dct:format <http://publications.europa.eu/resource/authority/file-type/DMN> ;
        dcat:mediaType "application/xml" ;
        dcat:accessURL <https://git.open-regels.nl/showcases/aow/-/blob/main/baseline/RONL_BerekenLeeftijden_CPRMV.dmn?ref_type=heads> ;
        dcat:downloadURL <https://git.open-regels.nl/showcases/aow/-/raw/main/baseline/RONL_BerekenLeeftijden_CPRMV.dmn?ref_type=heads> ;
        dct:issued "2024-12-09"^^xsd:date ;
        dct:license <http://creativecommons.org/licenses/by/4.0/> ;
        prov:wasGeneratedBy [
            a prov:Activity ;
            rdfs:label "Git commit"@en ;
            prov:used <https://git.open-regels.nl/showcases/aow> ;
        ] ;
    ] ;
    
    # Rule Specification with CPRMV
    cpsv-ap:specifies [
        a cpsv-ap:RuleSpecification ;
        dct:title "Datamodel voor bedrijfsregels"@nl ;
        dct:title "Data Model for Business Rules"@en ;
        dct:description "Dit model definieert de vereiste gegevensbronnen voor het bepalen van AOW-gerechtigdheid en leeftijd."@nl ;
        dct:description "This model defines the required data sources for determining AOW eligibility and age."@en ;
        
        # RONL Source References
        ronl:source <https://www.svb.nl/nl/aow/> ;
        
        # Link to executable DMN source (GitLab primary source)
        dct:source <https://git.open-regels.nl/showcases/aow/-/blob/main/baseline/RONL_BerekenLeeftijden_CPRMV.dmn?ref_type=heads> ;
        
        # Implementation endpoint
        ronl:implementedBy <https://regels.overheid.nl/lab/aow-leeftijd/resultaat> ;
        
        # Documentation Links
        rdfs:seeAlso <https://regels.overheid.nl/docs/lab/AOW> ;
        rdfs:seeAlso <https://regels.overheid.nl/publicaties/wetsanalyse> ;
        rdfs:seeAlso <https://regels.overheid.nl/docs/methods/CONCORDIALEGAL> ;
        
        # Format Specification
        dct:conformsTo <https://schema.example.org/AOWRulesModel> ;
        dct:format <http://publications.europa.eu/resource/authority/file-type/DMN> ;
        dcat:mediaType "application/xml" ;
        
        # CPRMV DMN Reference
        cprmv:dmnModelId "ronl_svb_berekenleeftijden" ;
        cprmv:dmnDecisionId "RONL_AOWleeftijd" ;
        
        # Criterion Requirements
        cpsv-ap:hasCriterionRequirement
            ronl:geboortecertificaat_datum_vereiste ,
            <systeem_datum_vereiste> ;
        
        # Required Inputs
        cpsv-ap:requiresInput 
            ronl:geboortecertificaat_datum ,
            <systeem_datum_dataset> ;
    ] .

#################################################################################
#                                                                               #
# CPRMV TEMPORAL RULES (Individual Rule Instances)                             #
#                                                                               #
#################################################################################

# Rule for year 2020
<aow_regel_2020> a cpsv-ap:Rule ;
    dct:title "AOW-leeftijd regel voor 2020"@nl ;
    dct:title "AOW age rule for 2020"@en ;
    cprmv:extends "BWBR0002221_2020-01-01_0/Artikel_7a/Lid_1" ;
    cprmv:validFrom "2020-01-01"^^xsd:date ;
    cprmv:validUntil "2020-12-31"^^xsd:date ;
    cprmv:ruleType "temporal-period" ;
    cprmv:confidence "high" ;
    dct:description "AOW-leeftijd in 2020: 66 jaar en 4 maanden"@nl ;
    dct:description "AOW age in 2020: 66 years and 4 months"@en ;
    cpsv-ap:isPartOf <aow_leeftijd_regels> .

# Rule for year 2021
<aow_regel_2021> a cpsv-ap:Rule ;
    dct:title "AOW-leeftijd regel voor 2021"@nl ;
    dct:title "AOW age rule for 2021"@en ;
    cprmv:extends "BWBR0002221_2021-01-01_0/Artikel_7a/Lid_1" ;
    cprmv:validFrom "2021-01-01"^^xsd:date ;
    cprmv:validUntil "2021-12-31"^^xsd:date ;
    cprmv:ruleType "temporal-period" ;
    cprmv:confidence "high" ;
    dct:description "AOW-leeftijd in 2021: 66 jaar en 7 maanden"@nl ;
    dct:description "AOW age in 2021: 66 years and 7 months"@en ;
    cpsv-ap:isPartOf <aow_leeftijd_regels> .

# Rule for year 2022
<aow_regel_2022> a cpsv-ap:Rule ;
    dct:title "AOW-leeftijd regel voor 2022"@nl ;
    dct:title "AOW age rule for 2022"@en ;
    cprmv:extends "BWBR0002221_2022-01-01_0/Artikel_7a/Lid_1" ;
    cprmv:validFrom "2022-01-01"^^xsd:date ;
    cprmv:validUntil "2022-12-31"^^xsd:date ;
    cprmv:ruleType "temporal-period" ;
    cprmv:confidence "high" ;
    dct:description "AOW-leeftijd in 2022: 66 jaar en 7 maanden"@nl ;
    dct:description "AOW age in 2022: 66 years and 7 months"@en ;
    cpsv-ap:isPartOf <aow_leeftijd_regels> .

# Rule for year 2023
<aow_regel_2023> a cpsv-ap:Rule ;
    dct:title "AOW-leeftijd regel voor 2023"@nl ;
    dct:title "AOW age rule for 2023"@en ;
    cprmv:extends "BWBR0002221_2023-01-01_0/Artikel_7a/Lid_1" ;
    cprmv:validFrom "2023-01-01"^^xsd:date ;
    cprmv:validUntil "2023-12-31"^^xsd:date ;
    cprmv:ruleType "temporal-period" ;
    cprmv:confidence "high" ;
    dct:description "AOW-leeftijd in 2023: 66 jaar en 10 maanden"@nl ;
    dct:description "AOW age in 2023: 66 years and 10 months"@en ;
    cpsv-ap:isPartOf <aow_leeftijd_regels> .

# Rule for year 2024
<aow_regel_2024> a cpsv-ap:Rule ;
    dct:title "AOW-leeftijd regel voor 2024"@nl ;
    dct:title "AOW age rule for 2024"@en ;
    cprmv:extends "BWBR0002221_2024-01-01_0/Artikel_7a/Lid_1" ;
    cprmv:validFrom "2024-01-01"^^xsd:date ;
    cprmv:validUntil "2024-12-31"^^xsd:date ;
    cprmv:ruleType "temporal-period" ;
    cprmv:confidence "high" ;
    dct:description "AOW-leeftijd in 2024: 67 jaar"@nl ;
    dct:description "AOW age in 2024: 67 years"@en ;
    cpsv-ap:isPartOf <aow_leeftijd_regels> .

# Rule for year 2025
<aow_regel_2025> a cpsv-ap:Rule ;
    dct:title "AOW-leeftijd regel voor 2025"@nl ;
    dct:title "AOW age rule for 2025"@en ;
    cprmv:extends "BWBR0002221_2025-01-01_0/Artikel_7a/Lid_1" ;
    cprmv:validFrom "2025-01-01"^^xsd:date ;
    cprmv:validUntil "2025-12-31"^^xsd:date ;
    cprmv:ruleType "temporal-period" ;
    cprmv:confidence "high" ;
    dct:description "AOW-leeftijd in 2025: 67 jaar"@nl ;
    dct:description "AOW age in 2025: 67 years"@en ;
    cpsv-ap:isPartOf <aow_leeftijd_regels> .

# Rule for year 2026 (Projected)
<aow_regel_2026> a cpsv-ap:Rule ;
    dct:title "AOW-leeftijd regel voor 2026"@nl ;
    dct:title "AOW age rule for 2026"@en ;
    cprmv:extends "BWBR0002221_2026-01-01_0/Artikel_7a/Lid_1" ;
    cprmv:validFrom "2026-01-01"^^xsd:date ;
    cprmv:validUntil "2026-12-31"^^xsd:date ;
    cprmv:ruleType "temporal-period" ;
    cprmv:confidence "medium" ;
    cprmv:note "Geprojecteerde waarde op basis van huidige wetgeving"@nl ;
    cprmv:note "Projected value based on current legislation"@en ;
    dct:description "AOW-leeftijd in 2026: 67 jaar (geprojecteerd)"@nl ;
    dct:description "AOW age in 2026: 67 years (projected)"@en ;
    cpsv-ap:isPartOf <aow_leeftijd_regels> .

# Rule for year 2027 (Projected)
<aow_regel_2027> a cpsv-ap:Rule ;
    dct:title "AOW-leeftijd regel voor 2027"@nl ;
    dct:title "AOW age rule for 2027"@en ;
    cprmv:extends "BWBR0002221_2027-01-01_0/Artikel_7a/Lid_1" ;
    cprmv:validFrom "2027-01-01"^^xsd:date ;
    cprmv:validUntil "2027-12-31"^^xsd:date ;
    cprmv:ruleType "temporal-period" ;
    cprmv:confidence "medium" ;
    cprmv:note "Geprojecteerde waarde op basis van huidige wetgeving"@nl ;
    cprmv:note "Projected value based on current legislation"@en ;
    dct:description "AOW-leeftijd in 2027: 67 jaar en 3 maanden (geprojecteerd)"@nl ;
    dct:description "AOW age in 2027: 67 years and 3 months (projected)"@en ;
    cpsv-ap:isPartOf <aow_leeftijd_regels> .

# Rule for year 2028 (Projected)
<aow_regel_2028> a cpsv-ap:Rule ;
    dct:title "AOW-leeftijd regel voor 2028"@nl ;
    dct:title "AOW age rule for 2028"@en ;
    cprmv:extends "BWBR0002221_2028-01-01_0/Artikel_7a/Lid_1" ;
    cprmv:validFrom "2028-01-01"^^xsd:date ;
    cprmv:validUntil "2028-12-31"^^xsd:date ;
    cprmv:ruleType "temporal-period" ;
    cprmv:confidence "medium" ;
    cprmv:note "Geprojecteerde waarde op basis van huidige wetgeving"@nl ;
    cprmv:note "Projected value based on current legislation"@en ;
    dct:description "AOW-leeftijd in 2028: 67 jaar en 3 maanden (geprojecteerd)"@nl ;
    dct:description "AOW age in 2028: 67 years and 3 months (projected)"@en ;
    cpsv-ap:isPartOf <aow_leeftijd_regels> .

# Rule for year 2029 (Projected)
<aow_regel_2029> a cpsv-ap:Rule ;
    dct:title "AOW-leeftijd regel voor 2029"@nl ;
    dct:title "AOW age rule for 2029"@en ;
    cprmv:extends "BWBR0002221_2029-01-01_0/Artikel_7a/Lid_1" ;
    cprmv:validFrom "2029-01-01"^^xsd:date ;
    cprmv:validUntil "2029-12-31"^^xsd:date ;
    cprmv:ruleType "temporal-period" ;
    cprmv:confidence "medium" ;
    cprmv:note "Geprojecteerde waarde op basis van huidige wetgeving"@nl ;
    cprmv:note "Projected value based on current legislation"@en ;
    dct:description "AOW-leeftijd in 2029: 67 jaar en 3 maanden (geprojecteerd)"@nl ;
    dct:description "AOW age in 2029: 67 years and 3 months (projected)"@en ;
    cpsv-ap:isPartOf <aow_leeftijd_regels> .

# Rule for year 2030 (Projected)
<aow_regel_2030> a cpsv-ap:Rule ;
    dct:title "AOW-leeftijd regel voor 2030"@nl ;
    dct:title "AOW age rule for 2030"@en ;
    cprmv:extends "BWBR0002221_2030-01-01_0/Artikel_7a/Lid_1" ;
    cprmv:validFrom "2030-01-01"^^xsd:date ;
    cprmv:validUntil "2030-12-31"^^xsd:date ;
    cprmv:ruleType "temporal-period" ;
    cprmv:confidence "medium" ;
    cprmv:note "Geprojecteerde waarde op basis van huidige wetgeving"@nl ;
    cprmv:note "Projected value based on current legislation"@en ;
    dct:description "AOW-leeftijd in 2030: 67 jaar en 3 maanden (geprojecteerd)"@nl ;
    dct:description "AOW age in 2030: 67 years and 3 months (projected)"@en ;
    cpsv-ap:isPartOf <aow_leeftijd_regels> .

#################################################################################
#                                                                               #
# CRITERION REQUIREMENTS                                                        #
#                                                                               #
#################################################################################

<systeem_datum_vereiste> a cpsv-ap:CriterionRequirement ;
    dct:title "Peildatum vereiste"@nl ;
    dct:title "Reference date requirement"@en ;
    dct:description "Peildatum voor berekening van AOW-leeftijd"@nl ;
    dct:description "Reference date for AOW age calculation"@en ;
    skos:inScheme ronl:Vocabulary .

#################################################################################
#                                                                               #
# DATASETS (Evidence Sources)                                                   #
#                                                                               #
#################################################################################

<systeem_datum_dataset> a dcat:Dataset ;
    dct:title "Systeemdatum voor leeftijdsberekening"@nl ;
    dct:title "System Date for Age Calculation"@en ;
    dct:description "De huidige datum wordt gebruikt als referentie om de leeftijd voor AOW te bepalen."@nl ;
    dct:description "The current date is used as a reference to determine eligibility age for AOW."@en ;
    dct:issued "1990-01-01"^^xsd:date ;
    dcat:theme <http://eurovoc.europa.eu/100141> ;
    dct:temporal [
        a dct:PeriodOfTime ;
        dct:startDate "1990-01-01"^^xsd:date ;
    ] ;
    dcat:keyword "System Date"@en, "Current Date"@en, "Systeemdatum"@nl, "Peildatum"@nl ;
    dct:publisher <https://organisaties.overheid.nl/28212263/Sociale_Verzekeringsbank> ;
    
    # CPRMV Input Data Metadata
    cprmv:description "De datum waarop de aanvraag wordt gedaan of de berekening plaatsvindt"@nl ;
    cprmv:description "The date on which the application is made or the calculation takes place"@en .

#################################################################################
#                                                                               #
# RONL VOCABULARY INTEGRATION                                                   #
#                                                                               #
#################################################################################

# This file uses the ronl:Vocabulary ConceptScheme defined in ronl.ttl
# The following concepts are referenced:
# - ronl:WetsanalyseJAS (analysis method)
# - ronl:ConcordiaLegal (rule management method)
# - ronl:geboortecertificaat_datum_vereiste (criterion requirement)
# - ronl:geboortecertificaat_datum (dataset/evidence)

# Additional temporal rules can be added following the pattern above
# Each rule should include:
# - cprmv:extends with the legal article path
# - cprmv:validFrom and cprmv:validUntil for temporal validity
# - cprmv:ruleType for classification
# - cprmv:confidence for reliability indication
# - cpsv-ap:isPartOf linking to the parent rule set

# DMN Distribution Notes:
# - Primary distribution: TriplyDB Assets (fast, integrated access)
# - Secondary distribution: GitLab CE (version-controlled source of truth)
# - Both distributions are discoverable via SPARQL queries
# - See DMN Storage Guide for maintenance and synchronization procedures